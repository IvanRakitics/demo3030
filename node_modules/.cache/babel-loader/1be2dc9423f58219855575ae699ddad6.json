{"ast":null,"code":"var __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport useLatest from '../useLatest';\nimport { getTargetElement } from '../utils/domTarget';\nimport useDeepCompareEffectWithTarget from '../utils/useDeepCompareWithTarget'; // 键盘事件 keyCode 别名\n\nvar aliasKeyCodeMap = {\n  '0': 48,\n  '1': 49,\n  '2': 50,\n  '3': 51,\n  '4': 52,\n  '5': 53,\n  '6': 54,\n  '7': 55,\n  '8': 56,\n  '9': 57,\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  ctrl: 17,\n  alt: 18,\n  pausebreak: 19,\n  capslock: 20,\n  esc: 27,\n  space: 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  leftarrow: 37,\n  uparrow: 38,\n  rightarrow: 39,\n  downarrow: 40,\n  insert: 45,\n  \"delete\": 46,\n  a: 65,\n  b: 66,\n  c: 67,\n  d: 68,\n  e: 69,\n  f: 70,\n  g: 71,\n  h: 72,\n  i: 73,\n  j: 74,\n  k: 75,\n  l: 76,\n  m: 77,\n  n: 78,\n  o: 79,\n  p: 80,\n  q: 81,\n  r: 82,\n  s: 83,\n  t: 84,\n  u: 85,\n  v: 86,\n  w: 87,\n  x: 88,\n  y: 89,\n  z: 90,\n  leftwindowkey: 91,\n  rightwindowkey: 92,\n  selectkey: 93,\n  numpad0: 96,\n  numpad1: 97,\n  numpad2: 98,\n  numpad3: 99,\n  numpad4: 100,\n  numpad5: 101,\n  numpad6: 102,\n  numpad7: 103,\n  numpad8: 104,\n  numpad9: 105,\n  multiply: 106,\n  add: 107,\n  subtract: 109,\n  decimalpoint: 110,\n  divide: 111,\n  f1: 112,\n  f2: 113,\n  f3: 114,\n  f4: 115,\n  f5: 116,\n  f6: 117,\n  f7: 118,\n  f8: 119,\n  f9: 120,\n  f10: 121,\n  f11: 122,\n  f12: 123,\n  numlock: 144,\n  scrolllock: 145,\n  semicolon: 186,\n  equalsign: 187,\n  comma: 188,\n  dash: 189,\n  period: 190,\n  forwardslash: 191,\n  graveaccent: 192,\n  openbracket: 219,\n  backslash: 220,\n  closebracket: 221,\n  singlequote: 222\n}; // 修饰键\n\nvar modifierKey = {\n  ctrl: function ctrl(event) {\n    return event.ctrlKey;\n  },\n  shift: function shift(event) {\n    return event.shiftKey;\n  },\n  alt: function alt(event) {\n    return event.altKey;\n  },\n  meta: function meta(event) {\n    return event.metaKey;\n  }\n}; // 根据 event 计算激活键数量\n\nfunction countKeyByEvent(event) {\n  var countOfModifier = Object.keys(modifierKey).reduce(function (total, key) {\n    if (modifierKey[key](event)) {\n      return total + 1;\n    }\n\n    return total;\n  }, 0); // 16 17 18 91 92 是修饰键的 keyCode，如果 keyCode 是修饰键，那么激活数量就是修饰键的数量，如果不是，那么就需要 +1\n\n  return [16, 17, 18, 91, 92].includes(event.keyCode) ? countOfModifier : countOfModifier + 1;\n}\n/**\n * 判断按键是否激活\n * @param [event: KeyboardEvent]键盘事件\n * @param [keyFilter: any] 当前键\n * @returns Boolean\n */\n\n\nfunction genFilterKey(event, keyFilter, exactMatch) {\n  var e_1, _a; // 浏览器自动补全 input 的时候，会触发 keyDown、keyUp 事件，但此时 event.key 等为空\n\n\n  if (!event.key) {\n    return false;\n  } // 数字类型直接匹配事件的 keyCode\n\n\n  if (typeof keyFilter === 'number') {\n    return event.keyCode === keyFilter;\n  } // 字符串依次判断是否有组合键\n\n\n  var genArr = keyFilter.split('.');\n  var genLen = 0;\n\n  try {\n    for (var genArr_1 = __values(genArr), genArr_1_1 = genArr_1.next(); !genArr_1_1.done; genArr_1_1 = genArr_1.next()) {\n      var key = genArr_1_1.value; // 组合键\n\n      var genModifier = modifierKey[key]; // keyCode 别名\n\n      var aliasKeyCode = aliasKeyCodeMap[key.toLowerCase()];\n\n      if (genModifier && genModifier(event) || aliasKeyCode && aliasKeyCode === event.keyCode) {\n        genLen++;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (genArr_1_1 && !genArr_1_1.done && (_a = genArr_1[\"return\"])) _a.call(genArr_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  /**\n   * 需要判断触发的键位和监听的键位完全一致，判断方法就是触发的键位里有且等于监听的键位\n   * genLen === genArr.length 能判断出来触发的键位里有监听的键位\n   * countKeyByEvent(event) === genArr.length 判断出来触发的键位数量里有且等于监听的键位数量\n   * 主要用来防止按组合键其子集也会触发的情况，例如监听 ctrl+a 会触发监听 ctrl 和 a 两个键的事件。\n   */\n\n\n  if (exactMatch) {\n    return genLen === genArr.length && countKeyByEvent(event) === genArr.length;\n  }\n\n  return genLen === genArr.length;\n}\n/**\n * 键盘输入预处理方法\n * @param [keyFilter: any] 当前键\n * @returns () => Boolean\n */\n\n\nfunction genKeyFormater(keyFilter, exactMatch) {\n  if (typeof keyFilter === 'function') {\n    return keyFilter;\n  }\n\n  if (typeof keyFilter === 'string' || typeof keyFilter === 'number') {\n    return function (event) {\n      return genFilterKey(event, keyFilter, exactMatch);\n    };\n  }\n\n  if (Array.isArray(keyFilter)) {\n    return function (event) {\n      return keyFilter.some(function (item) {\n        return genFilterKey(event, item, exactMatch);\n      });\n    };\n  }\n\n  return keyFilter ? function () {\n    return true;\n  } : function () {\n    return false;\n  };\n}\n\nvar defaultEvents = ['keydown'];\n\nfunction useKeyPress(keyFilter, eventHandler, option) {\n  var _a = option || {},\n      _b = _a.events,\n      events = _b === void 0 ? defaultEvents : _b,\n      target = _a.target,\n      _c = _a.exactMatch,\n      exactMatch = _c === void 0 ? false : _c;\n\n  var eventHandlerRef = useLatest(eventHandler);\n  var keyFilterRef = useLatest(keyFilter);\n  useDeepCompareEffectWithTarget(function () {\n    var e_2, _a;\n\n    var _b;\n\n    var el = getTargetElement(target, window);\n\n    if (!el) {\n      return;\n    }\n\n    var callbackHandler = function callbackHandler(event) {\n      var _a;\n\n      var genGuard = genKeyFormater(keyFilterRef.current, exactMatch);\n\n      if (genGuard(event)) {\n        return (_a = eventHandlerRef.current) === null || _a === void 0 ? void 0 : _a.call(eventHandlerRef, event);\n      }\n    };\n\n    try {\n      for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n        var eventName = events_1_1.value;\n        (_b = el === null || el === void 0 ? void 0 : el.addEventListener) === null || _b === void 0 ? void 0 : _b.call(el, eventName, callbackHandler);\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (events_1_1 && !events_1_1.done && (_a = events_1[\"return\"])) _a.call(events_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return function () {\n      var e_3, _a;\n\n      var _b;\n\n      try {\n        for (var events_2 = __values(events), events_2_1 = events_2.next(); !events_2_1.done; events_2_1 = events_2.next()) {\n          var eventName = events_2_1.value;\n          (_b = el === null || el === void 0 ? void 0 : el.removeEventListener) === null || _b === void 0 ? void 0 : _b.call(el, eventName, callbackHandler);\n        }\n      } catch (e_3_1) {\n        e_3 = {\n          error: e_3_1\n        };\n      } finally {\n        try {\n          if (events_2_1 && !events_2_1.done && (_a = events_2[\"return\"])) _a.call(events_2);\n        } finally {\n          if (e_3) throw e_3.error;\n        }\n      }\n    };\n  }, [events], target);\n}\n\nexport default useKeyPress;","map":{"version":3,"sources":["D:/react/project0330/node_modules/ahooks/es/useKeyPress/index.js"],"names":["__values","o","s","Symbol","iterator","m","i","call","length","next","value","done","TypeError","useLatest","getTargetElement","useDeepCompareEffectWithTarget","aliasKeyCodeMap","backspace","tab","enter","shift","ctrl","alt","pausebreak","capslock","esc","space","pageup","pagedown","end","home","leftarrow","uparrow","rightarrow","downarrow","insert","a","b","c","d","e","f","g","h","j","k","l","n","p","q","r","t","u","v","w","x","y","z","leftwindowkey","rightwindowkey","selectkey","numpad0","numpad1","numpad2","numpad3","numpad4","numpad5","numpad6","numpad7","numpad8","numpad9","multiply","add","subtract","decimalpoint","divide","f1","f2","f3","f4","f5","f6","f7","f8","f9","f10","f11","f12","numlock","scrolllock","semicolon","equalsign","comma","dash","period","forwardslash","graveaccent","openbracket","backslash","closebracket","singlequote","modifierKey","event","ctrlKey","shiftKey","altKey","meta","metaKey","countKeyByEvent","countOfModifier","Object","keys","reduce","total","key","includes","keyCode","genFilterKey","keyFilter","exactMatch","e_1","_a","genArr","split","genLen","genArr_1","genArr_1_1","genModifier","aliasKeyCode","toLowerCase","e_1_1","error","genKeyFormater","Array","isArray","some","item","defaultEvents","useKeyPress","eventHandler","option","_b","events","target","_c","eventHandlerRef","keyFilterRef","e_2","el","window","callbackHandler","genGuard","current","events_1","events_1_1","eventName","addEventListener","e_2_1","e_3","events_2","events_2_1","removeEventListener","e_3_1"],"mappings":"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","sourcesContent":["var __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n      m = s && o[s],\n      i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\n\nimport useLatest from '../useLatest';\nimport { getTargetElement } from '../utils/domTarget';\nimport useDeepCompareEffectWithTarget from '../utils/useDeepCompareWithTarget'; // 键盘事件 keyCode 别名\n\nvar aliasKeyCodeMap = {\n  '0': 48,\n  '1': 49,\n  '2': 50,\n  '3': 51,\n  '4': 52,\n  '5': 53,\n  '6': 54,\n  '7': 55,\n  '8': 56,\n  '9': 57,\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  ctrl: 17,\n  alt: 18,\n  pausebreak: 19,\n  capslock: 20,\n  esc: 27,\n  space: 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  leftarrow: 37,\n  uparrow: 38,\n  rightarrow: 39,\n  downarrow: 40,\n  insert: 45,\n  \"delete\": 46,\n  a: 65,\n  b: 66,\n  c: 67,\n  d: 68,\n  e: 69,\n  f: 70,\n  g: 71,\n  h: 72,\n  i: 73,\n  j: 74,\n  k: 75,\n  l: 76,\n  m: 77,\n  n: 78,\n  o: 79,\n  p: 80,\n  q: 81,\n  r: 82,\n  s: 83,\n  t: 84,\n  u: 85,\n  v: 86,\n  w: 87,\n  x: 88,\n  y: 89,\n  z: 90,\n  leftwindowkey: 91,\n  rightwindowkey: 92,\n  selectkey: 93,\n  numpad0: 96,\n  numpad1: 97,\n  numpad2: 98,\n  numpad3: 99,\n  numpad4: 100,\n  numpad5: 101,\n  numpad6: 102,\n  numpad7: 103,\n  numpad8: 104,\n  numpad9: 105,\n  multiply: 106,\n  add: 107,\n  subtract: 109,\n  decimalpoint: 110,\n  divide: 111,\n  f1: 112,\n  f2: 113,\n  f3: 114,\n  f4: 115,\n  f5: 116,\n  f6: 117,\n  f7: 118,\n  f8: 119,\n  f9: 120,\n  f10: 121,\n  f11: 122,\n  f12: 123,\n  numlock: 144,\n  scrolllock: 145,\n  semicolon: 186,\n  equalsign: 187,\n  comma: 188,\n  dash: 189,\n  period: 190,\n  forwardslash: 191,\n  graveaccent: 192,\n  openbracket: 219,\n  backslash: 220,\n  closebracket: 221,\n  singlequote: 222\n}; // 修饰键\n\nvar modifierKey = {\n  ctrl: function ctrl(event) {\n    return event.ctrlKey;\n  },\n  shift: function shift(event) {\n    return event.shiftKey;\n  },\n  alt: function alt(event) {\n    return event.altKey;\n  },\n  meta: function meta(event) {\n    return event.metaKey;\n  }\n}; // 根据 event 计算激活键数量\n\nfunction countKeyByEvent(event) {\n  var countOfModifier = Object.keys(modifierKey).reduce(function (total, key) {\n    if (modifierKey[key](event)) {\n      return total + 1;\n    }\n\n    return total;\n  }, 0); // 16 17 18 91 92 是修饰键的 keyCode，如果 keyCode 是修饰键，那么激活数量就是修饰键的数量，如果不是，那么就需要 +1\n\n  return [16, 17, 18, 91, 92].includes(event.keyCode) ? countOfModifier : countOfModifier + 1;\n}\n/**\n * 判断按键是否激活\n * @param [event: KeyboardEvent]键盘事件\n * @param [keyFilter: any] 当前键\n * @returns Boolean\n */\n\n\nfunction genFilterKey(event, keyFilter, exactMatch) {\n  var e_1, _a; // 浏览器自动补全 input 的时候，会触发 keyDown、keyUp 事件，但此时 event.key 等为空\n\n\n  if (!event.key) {\n    return false;\n  } // 数字类型直接匹配事件的 keyCode\n\n\n  if (typeof keyFilter === 'number') {\n    return event.keyCode === keyFilter;\n  } // 字符串依次判断是否有组合键\n\n\n  var genArr = keyFilter.split('.');\n  var genLen = 0;\n\n  try {\n    for (var genArr_1 = __values(genArr), genArr_1_1 = genArr_1.next(); !genArr_1_1.done; genArr_1_1 = genArr_1.next()) {\n      var key = genArr_1_1.value; // 组合键\n\n      var genModifier = modifierKey[key]; // keyCode 别名\n\n      var aliasKeyCode = aliasKeyCodeMap[key.toLowerCase()];\n\n      if (genModifier && genModifier(event) || aliasKeyCode && aliasKeyCode === event.keyCode) {\n        genLen++;\n      }\n    }\n  } catch (e_1_1) {\n    e_1 = {\n      error: e_1_1\n    };\n  } finally {\n    try {\n      if (genArr_1_1 && !genArr_1_1.done && (_a = genArr_1[\"return\"])) _a.call(genArr_1);\n    } finally {\n      if (e_1) throw e_1.error;\n    }\n  }\n  /**\n   * 需要判断触发的键位和监听的键位完全一致，判断方法就是触发的键位里有且等于监听的键位\n   * genLen === genArr.length 能判断出来触发的键位里有监听的键位\n   * countKeyByEvent(event) === genArr.length 判断出来触发的键位数量里有且等于监听的键位数量\n   * 主要用来防止按组合键其子集也会触发的情况，例如监听 ctrl+a 会触发监听 ctrl 和 a 两个键的事件。\n   */\n\n\n  if (exactMatch) {\n    return genLen === genArr.length && countKeyByEvent(event) === genArr.length;\n  }\n\n  return genLen === genArr.length;\n}\n/**\n * 键盘输入预处理方法\n * @param [keyFilter: any] 当前键\n * @returns () => Boolean\n */\n\n\nfunction genKeyFormater(keyFilter, exactMatch) {\n  if (typeof keyFilter === 'function') {\n    return keyFilter;\n  }\n\n  if (typeof keyFilter === 'string' || typeof keyFilter === 'number') {\n    return function (event) {\n      return genFilterKey(event, keyFilter, exactMatch);\n    };\n  }\n\n  if (Array.isArray(keyFilter)) {\n    return function (event) {\n      return keyFilter.some(function (item) {\n        return genFilterKey(event, item, exactMatch);\n      });\n    };\n  }\n\n  return keyFilter ? function () {\n    return true;\n  } : function () {\n    return false;\n  };\n}\n\nvar defaultEvents = ['keydown'];\n\nfunction useKeyPress(keyFilter, eventHandler, option) {\n  var _a = option || {},\n      _b = _a.events,\n      events = _b === void 0 ? defaultEvents : _b,\n      target = _a.target,\n      _c = _a.exactMatch,\n      exactMatch = _c === void 0 ? false : _c;\n\n  var eventHandlerRef = useLatest(eventHandler);\n  var keyFilterRef = useLatest(keyFilter);\n  useDeepCompareEffectWithTarget(function () {\n    var e_2, _a;\n\n    var _b;\n\n    var el = getTargetElement(target, window);\n\n    if (!el) {\n      return;\n    }\n\n    var callbackHandler = function callbackHandler(event) {\n      var _a;\n\n      var genGuard = genKeyFormater(keyFilterRef.current, exactMatch);\n\n      if (genGuard(event)) {\n        return (_a = eventHandlerRef.current) === null || _a === void 0 ? void 0 : _a.call(eventHandlerRef, event);\n      }\n    };\n\n    try {\n      for (var events_1 = __values(events), events_1_1 = events_1.next(); !events_1_1.done; events_1_1 = events_1.next()) {\n        var eventName = events_1_1.value;\n        (_b = el === null || el === void 0 ? void 0 : el.addEventListener) === null || _b === void 0 ? void 0 : _b.call(el, eventName, callbackHandler);\n      }\n    } catch (e_2_1) {\n      e_2 = {\n        error: e_2_1\n      };\n    } finally {\n      try {\n        if (events_1_1 && !events_1_1.done && (_a = events_1[\"return\"])) _a.call(events_1);\n      } finally {\n        if (e_2) throw e_2.error;\n      }\n    }\n\n    return function () {\n      var e_3, _a;\n\n      var _b;\n\n      try {\n        for (var events_2 = __values(events), events_2_1 = events_2.next(); !events_2_1.done; events_2_1 = events_2.next()) {\n          var eventName = events_2_1.value;\n          (_b = el === null || el === void 0 ? void 0 : el.removeEventListener) === null || _b === void 0 ? void 0 : _b.call(el, eventName, callbackHandler);\n        }\n      } catch (e_3_1) {\n        e_3 = {\n          error: e_3_1\n        };\n      } finally {\n        try {\n          if (events_2_1 && !events_2_1.done && (_a = events_2[\"return\"])) _a.call(events_2);\n        } finally {\n          if (e_3) throw e_3.error;\n        }\n      }\n    };\n  }, [events], target);\n}\n\nexport default useKeyPress;"]},"metadata":{},"sourceType":"module"}