{"ast":null,"code":"import _toConsumableArray from \"D:\\\\react\\\\project0330\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"D:\\\\react\\\\project0330\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\react\\\\project0330\\\\src\\\\views\\\\enclosure\\\\buyStyle\\\\StyleView\\\\index.js\";\n\nimport React, { useEffect, useState } from \"react\";\nimport \"./style.css\";\nimport Product from \"../Product\";\nimport ButtonCart from \"../../../../components/ButtonCart\";\n\nvar StyleView = function StyleView(props) {\n  var itemid = props.itemid,\n      productList = props.productList,\n      sendCartInfo = props.sendCartInfo,\n      data = props.data,\n      closeClickHandle = props.closeClickHandle,\n      createSalesOrder = props.createSalesOrder,\n      handleType = props.handleType;\n  console.log(data);\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      count = _useState2[0],\n      setCount = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      labelList = _useState4[0],\n      setLabelList = _useState4[1];\n\n  function onClickHandle() {\n    if (handleType === \"cart\") {\n      var labelStr = labelList.join(\"|\");\n      sendCartInfo(labelStr, count);\n    } else if (handleType === \"checkout\") {\n      var events = {\n        \"type\": \"create\"\n      };\n      var obj = {};\n      obj.amount = Number(count) * Number(data.price);\n      var details = [];\n      details.push({\n        \"item\": itemid\n      });\n      obj.details = details;\n      createSalesOrder(events, obj);\n    }\n  }\n\n  function _updateLabelLise(index, value) {\n    labelList[index] = value;\n    setLabelList(_toConsumableArray(labelList));\n  }\n\n  useEffect(function () {\n    var _labelList = productList.map(function (el) {\n      return el.label_list[0].id;\n    });\n\n    setLabelList(_labelList);\n  }, [productList]);\n\n  function increaseHandle() {\n    if (count - 1 > 0) {\n      setCount(count - 1);\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ui-mask\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pop-mask\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"iconfont pro-close\",\n    onClick: closeClickHandle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pro-info\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pro-img\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: data.cart_img,\n    alt: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pro-desc\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pro-price\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pro-price-cur\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 29\n    }\n  }, \"\\uFFE5\", data.price), String(data.originalprice).trim().length > 0 ? /*#__PURE__*/React.createElement(\"span\", {\n    className: \"pro-price-origin\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 80\n    }\n  }, \"\\uFFE5\", data.originalprice) : ''), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pro-name\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 29\n    }\n  }, data.title)))), productList && productList.length > 0 ? /*#__PURE__*/React.createElement(React.Fragment, null, productList.map(function (el, index) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      key: el.id,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 36\n      }\n    }, /*#__PURE__*/React.createElement(Product, {\n      title: el.title,\n      label: el.label_list,\n      updateLabelLise: function updateLabelLise(value) {\n        return _updateLabelLise(index, value);\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 33\n      }\n    }));\n  })) : '', /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pro-detials\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pro-quantity\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 25\n    }\n  }, \"\\u8D2D\\u4E70\\u6570\\u91CF\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pro-calc\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(ButtonCart, {\n    increaseHandle: increaseHandle,\n    decreaseHandle: function decreaseHandle() {\n      setCount(count + 1);\n    },\n    count: count,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  })))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"pro-button\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"action-pro-box\",\n    onClick: onClickHandle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"buy-btn\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, \"\\u786E\\u5B9A\"))));\n};\n\nexport default StyleView;","map":{"version":3,"sources":["D:/react/project0330/src/views/enclosure/buyStyle/StyleView/index.js"],"names":["React","useEffect","useState","Product","ButtonCart","StyleView","props","itemid","productList","sendCartInfo","data","closeClickHandle","createSalesOrder","handleType","console","log","count","setCount","labelList","setLabelList","onClickHandle","labelStr","join","events","obj","amount","Number","price","details","push","updateLabelLise","index","value","_labelList","map","el","label_list","id","increaseHandle","cart_img","String","originalprice","trim","length","title"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\n\r\nimport \"./style.css\";\r\n\r\nimport Product from \"../Product\";\r\nimport ButtonCart from \"../../../../components/ButtonCart\";\r\n\r\n\r\nconst StyleView = ( props ) =>{\r\n\r\n    const { itemid, productList,sendCartInfo, data, closeClickHandle, createSalesOrder, handleType} = props\r\n\r\n    console.log(data)\r\n    \r\n    const [count,setCount] = useState(1)\r\n    const [labelList,setLabelList] = useState([])\r\n\r\n    function onClickHandle(){\r\n        if( handleType === \"cart\" ){\r\n            let labelStr = labelList.join(\"|\")\r\n            sendCartInfo(labelStr,count)\r\n        }else if( handleType === \"checkout\" ){\r\n            let events = { \"type\": \"create\" }\r\n            let obj = {}\r\n            obj.amount = Number(count) * Number(data.price)\r\n            let details = []\r\n            details.push( {\"item\": itemid,  } )\r\n            obj.details = details\r\n            createSalesOrder( events, obj )\r\n        }\r\n    }\r\n\r\n    function updateLabelLise(index,value){\r\n        labelList[index] = value\r\n        setLabelList([...labelList])\r\n    }\r\n\r\n    useEffect(()=>{\r\n        let _labelList = productList.map(el => el.label_list[0].id)\r\n        setLabelList(_labelList)\r\n    },[productList])\r\n\r\n    function increaseHandle(){\r\n        if( count -1 > 0 ){\r\n            setCount(count-1)\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div>\r\n            <div className=\"ui-mask\"></div>\r\n            <div className=\"pop-mask\">\r\n                <i className=\"iconfont pro-close\" onClick={closeClickHandle}></i>\r\n                <div className=\"pro-info\">\r\n                    <div className=\"pro-img\">\r\n                        <img src={data.cart_img} alt=\"\"></img>\r\n                    </div>\r\n                    <div className=\"pro-desc\">\r\n                        <div className=\"pro-price\">\r\n                            <span className=\"pro-price-cur\">￥{data.price}</span>\r\n                            {\r\n                                String(data.originalprice).trim().length > 0 ? <span className=\"pro-price-origin\">￥{data.originalprice}</span> : ''\r\n                            }\r\n                        </div>\r\n                        <div className=\"pro-name\">\r\n                            <span>{data.title}</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                {\r\n                    productList && productList.length > 0 ? <>{\r\n                        productList.map((el,index)=>{\r\n                            return(<div key={el.id}>\r\n                                <Product title={el.title} label={el.label_list} updateLabelLise={(value)=>updateLabelLise(index,value)}/>\r\n                            </div>)\r\n                        })\r\n                     }</> : ''\r\n                }\r\n                <div className=\"pro-detials\">\r\n                    <div className=\"pro-quantity\">\r\n                        <span>购买数量</span>\r\n                    </div>\r\n                    <div className=\"pro-calc\">\r\n                        <ButtonCart increaseHandle={ increaseHandle }  decreaseHandle={ ()=>{setCount(count+1) }}  count={count}/>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"pro-button\">\r\n                <div className=\"action-pro-box\" onClick={onClickHandle}>\r\n                    <div className=\"buy-btn\">确定</div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default StyleView"]},"metadata":{},"sourceType":"module"}