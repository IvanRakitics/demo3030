{"ast":null,"code":"import React, { forwardRef, useImperativeHandle, useRef, useState } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport { Slide } from './slide';\nimport { Slides } from './slides';\nconst classPrefix = `adm-image-viewer`;\nconst defaultProps = {\n  maxZoom: 3,\n  getContainer: null,\n  visible: false\n};\nexport const ImageViewer = p => {\n  const props = mergeProps(defaultProps, p);\n  const node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.image && React.createElement(Slide, {\n    image: props.image,\n    onTap: () => {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })));\n  return renderToContainer(props.getContainer, node);\n};\nconst multiDefaultProps = Object.assign(Object.assign({}, defaultProps), {\n  defaultIndex: 0\n});\nexport const MultiImageViewer = forwardRef((p, ref) => {\n  const props = mergeProps(multiDefaultProps, p);\n  const [defaultIndex, setDefaultIndex] = useState(props.defaultIndex);\n  const slidesRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    swipeTo: (index, immediate) => {\n      var _a;\n\n      setDefaultIndex(index);\n      (_a = slidesRef.current) === null || _a === void 0 ? void 0 : _a.swipeTo(index, immediate);\n    }\n  }));\n  const node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.images && React.createElement(Slides, {\n    ref: slidesRef,\n    defaultIndex: defaultIndex,\n    onIndexChange: props.onIndexChange,\n    images: props.images,\n    onTap: () => {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })));\n  return renderToContainer(props.getContainer, node);\n});","map":{"version":3,"sources":["D:/react/project0330/node_modules/antd-mobile/es/components/image-viewer/image-viewer.js"],"names":["React","forwardRef","useImperativeHandle","useRef","useState","mergeProps","renderToContainer","Mask","Slide","Slides","classPrefix","defaultProps","maxZoom","getContainer","visible","ImageViewer","p","props","node","createElement","disableBodyScroll","opacity","afterClose","className","image","onTap","_a","onClose","call","multiDefaultProps","Object","assign","defaultIndex","MultiImageViewer","ref","setDefaultIndex","slidesRef","swipeTo","index","immediate","current","images","onIndexChange"],"mappings":"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","sourcesContent":["import React, { forwardRef, useImperativeHandle, useRef, useState } from 'react';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { renderToContainer } from '../../utils/render-to-container';\nimport Mask from '../mask';\nimport { Slide } from './slide';\nimport { Slides } from './slides';\nconst classPrefix = `adm-image-viewer`;\nconst defaultProps = {\n  maxZoom: 3,\n  getContainer: null,\n  visible: false\n};\nexport const ImageViewer = p => {\n  const props = mergeProps(defaultProps, p);\n  const node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.image && React.createElement(Slide, {\n    image: props.image,\n    onTap: () => {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })));\n  return renderToContainer(props.getContainer, node);\n};\nconst multiDefaultProps = Object.assign(Object.assign({}, defaultProps), {\n  defaultIndex: 0\n});\nexport const MultiImageViewer = forwardRef((p, ref) => {\n  const props = mergeProps(multiDefaultProps, p);\n  const [defaultIndex, setDefaultIndex] = useState(props.defaultIndex);\n  const slidesRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    swipeTo: (index, immediate) => {\n      var _a;\n\n      setDefaultIndex(index);\n      (_a = slidesRef.current) === null || _a === void 0 ? void 0 : _a.swipeTo(index, immediate);\n    }\n  }));\n  const node = React.createElement(Mask, {\n    visible: props.visible,\n    disableBodyScroll: false,\n    opacity: 'thick',\n    afterClose: props.afterClose\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-content`\n  }, props.images && React.createElement(Slides, {\n    ref: slidesRef,\n    defaultIndex: defaultIndex,\n    onIndexChange: props.onIndexChange,\n    images: props.images,\n    onTap: () => {\n      var _a;\n\n      (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n    },\n    maxZoom: props.maxZoom\n  })));\n  return renderToContainer(props.getContainer, node);\n});"]},"metadata":{},"sourceType":"module"}