{"ast":null,"code":"import React, { useState, useRef, forwardRef, useImperativeHandle } from 'react';\nimport classNames from 'classnames';\nimport Input from '../input';\nimport Button from '../button';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SearchOutline } from 'antd-mobile-icons';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useConfig } from '../config-provider';\nconst classPrefix = `adm-search-bar`;\nconst defaultProps = {\n  clearable: true,\n  showCancelButton: false,\n  defaultValue: '',\n  clearOnCancel: true,\n  icon: React.createElement(SearchOutline, null)\n};\nexport const SearchBar = forwardRef((p, ref) => {\n  const {\n    locale\n  } = useConfig();\n  const props = mergeProps(defaultProps, {\n    cancelText: locale.common.cancel\n  }, p);\n  const [value, setValue] = usePropsValue(props);\n  const [hasFocus, setHasFocus] = useState(false);\n  const inputRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    clear: () => {\n      var _a;\n\n      return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n    },\n    focus: () => {\n      var _a;\n\n      return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    },\n    blur: () => {\n      var _a;\n\n      return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n    },\n\n    get nativeElement() {\n      var _a, _b;\n\n      return (_b = (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.nativeElement) !== null && _b !== void 0 ? _b : null;\n    }\n\n  }));\n\n  const renderCancelButton = () => {\n    let isShowCancel = false;\n\n    if (typeof props.showCancelButton === 'function') {\n      isShowCancel = props.showCancelButton(hasFocus, value);\n    } else {\n      isShowCancel = props.showCancelButton && hasFocus;\n    }\n\n    return isShowCancel && React.createElement(\"div\", {\n      className: `${classPrefix}-suffix`,\n      onMouseDown: e => {\n        e.preventDefault();\n      },\n      onTouchStart: e => {\n        e.preventDefault();\n      }\n    }, React.createElement(Button, {\n      fill: 'none',\n      className: `${classPrefix}-cancel-button`,\n      onClick: () => {\n        var _a, _b, _c;\n\n        if (props.clearOnCancel) {\n          (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n        }\n\n        (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.blur();\n        (_c = props.onCancel) === null || _c === void 0 ? void 0 : _c.call(props);\n      }\n    }, props.cancelText));\n  };\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classNames(classPrefix, {\n      [`${classPrefix}-active`]: hasFocus\n    })\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-input-box`\n  }, props.icon && React.createElement(\"div\", {\n    className: `${classPrefix}-input-box-icon`\n  }, props.icon), React.createElement(Input, {\n    ref: inputRef,\n    className: classNames(`${classPrefix}-input`, {\n      [`${classPrefix}-input-without-icon`]: !props.icon\n    }),\n    value: value,\n    onChange: setValue,\n    maxLength: props.maxLength,\n    placeholder: props.placeholder,\n    clearable: props.clearable,\n    onFocus: e => {\n      var _a;\n\n      setHasFocus(true);\n      (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onBlur: e => {\n      var _a;\n\n      setHasFocus(false);\n      (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onClear: props.onClear,\n    type: 'search',\n    enterKeyHint: 'search',\n    onEnterPress: () => {\n      var _a, _b;\n\n      (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      (_b = props.onSearch) === null || _b === void 0 ? void 0 : _b.call(props, value);\n    }\n  })), renderCancelButton()));\n});","map":{"version":3,"sources":["D:/react/project0330/node_modules/antd-mobile/es/components/search-bar/search-bar.js"],"names":["React","useState","useRef","forwardRef","useImperativeHandle","classNames","Input","Button","withNativeProps","mergeProps","SearchOutline","usePropsValue","useConfig","classPrefix","defaultProps","clearable","showCancelButton","defaultValue","clearOnCancel","icon","createElement","SearchBar","p","ref","locale","props","cancelText","common","cancel","value","setValue","hasFocus","setHasFocus","inputRef","clear","_a","current","focus","blur","nativeElement","_b","renderCancelButton","isShowCancel","className","onMouseDown","e","preventDefault","onTouchStart","fill","onClick","_c","onCancel","call","onChange","maxLength","placeholder","onFocus","onBlur","onClear","type","enterKeyHint","onEnterPress","onSearch"],"mappings":"AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,MAA1B,EAAkCC,UAAlC,EAA8CC,mBAA9C,QAAyE,OAAzE;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,SAASC,UAAT,QAA2B,gCAA3B;AACA,SAASC,aAAT,QAA8B,mBAA9B;AACA,SAASC,aAAT,QAA8B,6BAA9B;AACA,SAASC,SAAT,QAA0B,oBAA1B;AACA,MAAMC,WAAW,GAAI,gBAArB;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,SAAS,EAAE,IADQ;AAEnBC,EAAAA,gBAAgB,EAAE,KAFC;AAGnBC,EAAAA,YAAY,EAAE,EAHK;AAInBC,EAAAA,aAAa,EAAE,IAJI;AAKnBC,EAAAA,IAAI,EAAEnB,KAAK,CAACoB,aAAN,CAAoBV,aAApB,EAAmC,IAAnC;AALa,CAArB;AAOA,OAAO,MAAMW,SAAS,GAAGlB,UAAU,CAAC,CAACmB,CAAD,EAAIC,GAAJ,KAAY;AAC9C,QAAM;AACJC,IAAAA;AADI,MAEFZ,SAAS,EAFb;AAGA,QAAMa,KAAK,GAAGhB,UAAU,CAACK,YAAD,EAAe;AACrCY,IAAAA,UAAU,EAAEF,MAAM,CAACG,MAAP,CAAcC;AADW,GAAf,EAErBN,CAFqB,CAAxB;AAGA,QAAM,CAACO,KAAD,EAAQC,QAAR,IAAoBnB,aAAa,CAACc,KAAD,CAAvC;AACA,QAAM,CAACM,QAAD,EAAWC,WAAX,IAA0B/B,QAAQ,CAAC,KAAD,CAAxC;AACA,QAAMgC,QAAQ,GAAG/B,MAAM,CAAC,IAAD,CAAvB;AACAE,EAAAA,mBAAmB,CAACmB,GAAD,EAAM,OAAO;AAC9BW,IAAAA,KAAK,EAAE,MAAM;AACX,UAAIC,EAAJ;;AAEA,aAAO,CAACA,EAAE,GAAGF,QAAQ,CAACG,OAAf,MAA4B,IAA5B,IAAoCD,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACD,KAAH,EAApE;AACD,KAL6B;AAM9BG,IAAAA,KAAK,EAAE,MAAM;AACX,UAAIF,EAAJ;;AAEA,aAAO,CAACA,EAAE,GAAGF,QAAQ,CAACG,OAAf,MAA4B,IAA5B,IAAoCD,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACE,KAAH,EAApE;AACD,KAV6B;AAW9BC,IAAAA,IAAI,EAAE,MAAM;AACV,UAAIH,EAAJ;;AAEA,aAAO,CAACA,EAAE,GAAGF,QAAQ,CAACG,OAAf,MAA4B,IAA5B,IAAoCD,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACG,IAAH,EAApE;AACD,KAf6B;;AAiB9B,QAAIC,aAAJ,GAAoB;AAClB,UAAIJ,EAAJ,EAAQK,EAAR;;AAEA,aAAO,CAACA,EAAE,GAAG,CAACL,EAAE,GAAGF,QAAQ,CAACG,OAAf,MAA4B,IAA5B,IAAoCD,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACI,aAAtE,MAAyF,IAAzF,IAAiGC,EAAE,KAAK,KAAK,CAA7G,GAAiHA,EAAjH,GAAsH,IAA7H;AACD;;AArB6B,GAAP,CAAN,CAAnB;;AAyBA,QAAMC,kBAAkB,GAAG,MAAM;AAC/B,QAAIC,YAAY,GAAG,KAAnB;;AAEA,QAAI,OAAOjB,KAAK,CAACT,gBAAb,KAAkC,UAAtC,EAAkD;AAChD0B,MAAAA,YAAY,GAAGjB,KAAK,CAACT,gBAAN,CAAuBe,QAAvB,EAAiCF,KAAjC,CAAf;AACD,KAFD,MAEO;AACLa,MAAAA,YAAY,GAAGjB,KAAK,CAACT,gBAAN,IAA0Be,QAAzC;AACD;;AAED,WAAOW,YAAY,IAAI1C,KAAK,CAACoB,aAAN,CAAoB,KAApB,EAA2B;AAChDuB,MAAAA,SAAS,EAAG,GAAE9B,WAAY,SADsB;AAEhD+B,MAAAA,WAAW,EAAEC,CAAC,IAAI;AAChBA,QAAAA,CAAC,CAACC,cAAF;AACD,OAJ+C;AAKhDC,MAAAA,YAAY,EAAEF,CAAC,IAAI;AACjBA,QAAAA,CAAC,CAACC,cAAF;AACD;AAP+C,KAA3B,EAQpB9C,KAAK,CAACoB,aAAN,CAAoBb,MAApB,EAA4B;AAC7ByC,MAAAA,IAAI,EAAE,MADuB;AAE7BL,MAAAA,SAAS,EAAG,GAAE9B,WAAY,gBAFG;AAG7BoC,MAAAA,OAAO,EAAE,MAAM;AACb,YAAId,EAAJ,EAAQK,EAAR,EAAYU,EAAZ;;AAEA,YAAIzB,KAAK,CAACP,aAAV,EAAyB;AACvB,WAACiB,EAAE,GAAGF,QAAQ,CAACG,OAAf,MAA4B,IAA5B,IAAoCD,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACD,KAAH,EAA7D;AACD;;AAED,SAACM,EAAE,GAAGP,QAAQ,CAACG,OAAf,MAA4B,IAA5B,IAAoCI,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACF,IAAH,EAA7D;AACA,SAACY,EAAE,GAAGzB,KAAK,CAAC0B,QAAZ,MAA0B,IAA1B,IAAkCD,EAAE,KAAK,KAAK,CAA9C,GAAkD,KAAK,CAAvD,GAA2DA,EAAE,CAACE,IAAH,CAAQ3B,KAAR,CAA3D;AACD;AAZ4B,KAA5B,EAaAA,KAAK,CAACC,UAbN,CARoB,CAAvB;AAsBD,GA/BD;;AAiCA,SAAOlB,eAAe,CAACiB,KAAD,EAAQzB,KAAK,CAACoB,aAAN,CAAoB,KAApB,EAA2B;AACvDuB,IAAAA,SAAS,EAAEtC,UAAU,CAACQ,WAAD,EAAc;AACjC,OAAE,GAAEA,WAAY,SAAhB,GAA2BkB;AADM,KAAd;AADkC,GAA3B,EAI3B/B,KAAK,CAACoB,aAAN,CAAoB,KAApB,EAA2B;AAC5BuB,IAAAA,SAAS,EAAG,GAAE9B,WAAY;AADE,GAA3B,EAEAY,KAAK,CAACN,IAAN,IAAcnB,KAAK,CAACoB,aAAN,CAAoB,KAApB,EAA2B;AAC1CuB,IAAAA,SAAS,EAAG,GAAE9B,WAAY;AADgB,GAA3B,EAEdY,KAAK,CAACN,IAFQ,CAFd,EAIanB,KAAK,CAACoB,aAAN,CAAoBd,KAApB,EAA2B;AACzCiB,IAAAA,GAAG,EAAEU,QADoC;AAEzCU,IAAAA,SAAS,EAAEtC,UAAU,CAAE,GAAEQ,WAAY,QAAhB,EAAyB;AAC5C,OAAE,GAAEA,WAAY,qBAAhB,GAAuC,CAACY,KAAK,CAACN;AADF,KAAzB,CAFoB;AAKzCU,IAAAA,KAAK,EAAEA,KALkC;AAMzCwB,IAAAA,QAAQ,EAAEvB,QAN+B;AAOzCwB,IAAAA,SAAS,EAAE7B,KAAK,CAAC6B,SAPwB;AAQzCC,IAAAA,WAAW,EAAE9B,KAAK,CAAC8B,WARsB;AASzCxC,IAAAA,SAAS,EAAEU,KAAK,CAACV,SATwB;AAUzCyC,IAAAA,OAAO,EAAEX,CAAC,IAAI;AACZ,UAAIV,EAAJ;;AAEAH,MAAAA,WAAW,CAAC,IAAD,CAAX;AACA,OAACG,EAAE,GAAGV,KAAK,CAAC+B,OAAZ,MAAyB,IAAzB,IAAiCrB,EAAE,KAAK,KAAK,CAA7C,GAAiD,KAAK,CAAtD,GAA0DA,EAAE,CAACiB,IAAH,CAAQ3B,KAAR,EAAeoB,CAAf,CAA1D;AACD,KAfwC;AAgBzCY,IAAAA,MAAM,EAAEZ,CAAC,IAAI;AACX,UAAIV,EAAJ;;AAEAH,MAAAA,WAAW,CAAC,KAAD,CAAX;AACA,OAACG,EAAE,GAAGV,KAAK,CAACgC,MAAZ,MAAwB,IAAxB,IAAgCtB,EAAE,KAAK,KAAK,CAA5C,GAAgD,KAAK,CAArD,GAAyDA,EAAE,CAACiB,IAAH,CAAQ3B,KAAR,EAAeoB,CAAf,CAAzD;AACD,KArBwC;AAsBzCa,IAAAA,OAAO,EAAEjC,KAAK,CAACiC,OAtB0B;AAuBzCC,IAAAA,IAAI,EAAE,QAvBmC;AAwBzCC,IAAAA,YAAY,EAAE,QAxB2B;AAyBzCC,IAAAA,YAAY,EAAE,MAAM;AAClB,UAAI1B,EAAJ,EAAQK,EAAR;;AAEA,OAACL,EAAE,GAAGF,QAAQ,CAACG,OAAf,MAA4B,IAA5B,IAAoCD,EAAE,KAAK,KAAK,CAAhD,GAAoD,KAAK,CAAzD,GAA6DA,EAAE,CAACG,IAAH,EAA7D;AACA,OAACE,EAAE,GAAGf,KAAK,CAACqC,QAAZ,MAA0B,IAA1B,IAAkCtB,EAAE,KAAK,KAAK,CAA9C,GAAkD,KAAK,CAAvD,GAA2DA,EAAE,CAACY,IAAH,CAAQ3B,KAAR,EAAeI,KAAf,CAA3D;AACD;AA9BwC,GAA3B,CAJb,CAJ2B,EAuCzBY,kBAAkB,EAvCO,CAAR,CAAtB;AAwCD,CA5GkC,CAA5B","sourcesContent":["import React, { useState, useRef, forwardRef, useImperativeHandle } from 'react';\nimport classNames from 'classnames';\nimport Input from '../input';\nimport Button from '../button';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { SearchOutline } from 'antd-mobile-icons';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useConfig } from '../config-provider';\nconst classPrefix = `adm-search-bar`;\nconst defaultProps = {\n  clearable: true,\n  showCancelButton: false,\n  defaultValue: '',\n  clearOnCancel: true,\n  icon: React.createElement(SearchOutline, null)\n};\nexport const SearchBar = forwardRef((p, ref) => {\n  const {\n    locale\n  } = useConfig();\n  const props = mergeProps(defaultProps, {\n    cancelText: locale.common.cancel\n  }, p);\n  const [value, setValue] = usePropsValue(props);\n  const [hasFocus, setHasFocus] = useState(false);\n  const inputRef = useRef(null);\n  useImperativeHandle(ref, () => ({\n    clear: () => {\n      var _a;\n\n      return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n    },\n    focus: () => {\n      var _a;\n\n      return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.focus();\n    },\n    blur: () => {\n      var _a;\n\n      return (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n    },\n\n    get nativeElement() {\n      var _a, _b;\n\n      return (_b = (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.nativeElement) !== null && _b !== void 0 ? _b : null;\n    }\n\n  }));\n\n  const renderCancelButton = () => {\n    let isShowCancel = false;\n\n    if (typeof props.showCancelButton === 'function') {\n      isShowCancel = props.showCancelButton(hasFocus, value);\n    } else {\n      isShowCancel = props.showCancelButton && hasFocus;\n    }\n\n    return isShowCancel && React.createElement(\"div\", {\n      className: `${classPrefix}-suffix`,\n      onMouseDown: e => {\n        e.preventDefault();\n      },\n      onTouchStart: e => {\n        e.preventDefault();\n      }\n    }, React.createElement(Button, {\n      fill: 'none',\n      className: `${classPrefix}-cancel-button`,\n      onClick: () => {\n        var _a, _b, _c;\n\n        if (props.clearOnCancel) {\n          (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.clear();\n        }\n\n        (_b = inputRef.current) === null || _b === void 0 ? void 0 : _b.blur();\n        (_c = props.onCancel) === null || _c === void 0 ? void 0 : _c.call(props);\n      }\n    }, props.cancelText));\n  };\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classNames(classPrefix, {\n      [`${classPrefix}-active`]: hasFocus\n    })\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-input-box`\n  }, props.icon && React.createElement(\"div\", {\n    className: `${classPrefix}-input-box-icon`\n  }, props.icon), React.createElement(Input, {\n    ref: inputRef,\n    className: classNames(`${classPrefix}-input`, {\n      [`${classPrefix}-input-without-icon`]: !props.icon\n    }),\n    value: value,\n    onChange: setValue,\n    maxLength: props.maxLength,\n    placeholder: props.placeholder,\n    clearable: props.clearable,\n    onFocus: e => {\n      var _a;\n\n      setHasFocus(true);\n      (_a = props.onFocus) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onBlur: e => {\n      var _a;\n\n      setHasFocus(false);\n      (_a = props.onBlur) === null || _a === void 0 ? void 0 : _a.call(props, e);\n    },\n    onClear: props.onClear,\n    type: 'search',\n    enterKeyHint: 'search',\n    onEnterPress: () => {\n      var _a, _b;\n\n      (_a = inputRef.current) === null || _a === void 0 ? void 0 : _a.blur();\n      (_b = props.onSearch) === null || _b === void 0 ? void 0 : _b.call(props, value);\n    }\n  })), renderCancelButton()));\n});"]},"metadata":{},"sourceType":"module"}