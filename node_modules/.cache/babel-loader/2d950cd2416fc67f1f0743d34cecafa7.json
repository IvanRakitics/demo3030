{"ast":null,"code":"import React from 'react';\nimport classNames from 'classnames';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { StarFill } from 'antd-mobile-icons';\nimport { usePropsValue } from '../../utils/use-props-value';\nconst classPrefix = `adm-rate`;\nconst defaultProps = {\n  count: 5,\n  allowHalf: false,\n  character: React.createElement(StarFill, null),\n  defaultValue: 0,\n  readOnly: false,\n  allowClear: true\n};\nexport const Rate = p => {\n  const props = mergeProps(defaultProps, p);\n  const [value, setValue] = usePropsValue(props);\n  const starList = Array(props.count).fill(null);\n\n  function renderStar(v, half) {\n    return React.createElement(\"div\", {\n      className: classNames(`${classPrefix}-star`, {\n        [`${classPrefix}-star-active`]: value >= v,\n        [`${classPrefix}-star-half`]: half,\n        [`${classPrefix}-star-readonly`]: props.readOnly\n      }),\n      onClick: () => {\n        if (props.readOnly) return;\n\n        if (props.allowClear && value === v) {\n          setValue(0);\n        } else {\n          setValue(v);\n        }\n      }\n    }, props.character);\n  }\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix\n  }, starList.map((_, i) => React.createElement(\"div\", {\n    key: i,\n    className: classNames(`${classPrefix}-box`)\n  }, props.allowHalf && renderStar(i + 0.5, true), renderStar(i + 1, false)))));\n};","map":{"version":3,"sources":["D:/react/project0330/node_modules/antd-mobile/es/components/rate/rate.js"],"names":["React","classNames","withNativeProps","mergeProps","StarFill","usePropsValue","classPrefix","defaultProps","count","allowHalf","character","createElement","defaultValue","readOnly","allowClear","Rate","p","props","value","setValue","starList","Array","fill","renderStar","v","half","className","onClick","map","_","i","key"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,YAAvB;AACA,SAASC,eAAT,QAAgC,0BAAhC;AACA,SAASC,UAAT,QAA2B,gCAA3B;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,aAAT,QAA8B,6BAA9B;AACA,MAAMC,WAAW,GAAI,UAArB;AACA,MAAMC,YAAY,GAAG;AACnBC,EAAAA,KAAK,EAAE,CADY;AAEnBC,EAAAA,SAAS,EAAE,KAFQ;AAGnBC,EAAAA,SAAS,EAAEV,KAAK,CAACW,aAAN,CAAoBP,QAApB,EAA8B,IAA9B,CAHQ;AAInBQ,EAAAA,YAAY,EAAE,CAJK;AAKnBC,EAAAA,QAAQ,EAAE,KALS;AAMnBC,EAAAA,UAAU,EAAE;AANO,CAArB;AAQA,OAAO,MAAMC,IAAI,GAAGC,CAAC,IAAI;AACvB,QAAMC,KAAK,GAAGd,UAAU,CAACI,YAAD,EAAeS,CAAf,CAAxB;AACA,QAAM,CAACE,KAAD,EAAQC,QAAR,IAAoBd,aAAa,CAACY,KAAD,CAAvC;AACA,QAAMG,QAAQ,GAAGC,KAAK,CAACJ,KAAK,CAACT,KAAP,CAAL,CAAmBc,IAAnB,CAAwB,IAAxB,CAAjB;;AAEA,WAASC,UAAT,CAAoBC,CAApB,EAAuBC,IAAvB,EAA6B;AAC3B,WAAOzB,KAAK,CAACW,aAAN,CAAoB,KAApB,EAA2B;AAChCe,MAAAA,SAAS,EAAEzB,UAAU,CAAE,GAAEK,WAAY,OAAhB,EAAwB;AAC3C,SAAE,GAAEA,WAAY,cAAhB,GAAgCY,KAAK,IAAIM,CADE;AAE3C,SAAE,GAAElB,WAAY,YAAhB,GAA8BmB,IAFa;AAG3C,SAAE,GAAEnB,WAAY,gBAAhB,GAAkCW,KAAK,CAACJ;AAHG,OAAxB,CADW;AAMhCc,MAAAA,OAAO,EAAE,MAAM;AACb,YAAIV,KAAK,CAACJ,QAAV,EAAoB;;AAEpB,YAAII,KAAK,CAACH,UAAN,IAAoBI,KAAK,KAAKM,CAAlC,EAAqC;AACnCL,UAAAA,QAAQ,CAAC,CAAD,CAAR;AACD,SAFD,MAEO;AACLA,UAAAA,QAAQ,CAACK,CAAD,CAAR;AACD;AACF;AAd+B,KAA3B,EAeJP,KAAK,CAACP,SAfF,CAAP;AAgBD;;AAED,SAAOR,eAAe,CAACe,KAAD,EAAQjB,KAAK,CAACW,aAAN,CAAoB,KAApB,EAA2B;AACvDe,IAAAA,SAAS,EAAEpB;AAD4C,GAA3B,EAE3Bc,QAAQ,CAACQ,GAAT,CAAa,CAACC,CAAD,EAAIC,CAAJ,KAAU9B,KAAK,CAACW,aAAN,CAAoB,KAApB,EAA2B;AACnDoB,IAAAA,GAAG,EAAED,CAD8C;AAEnDJ,IAAAA,SAAS,EAAEzB,UAAU,CAAE,GAAEK,WAAY,MAAhB;AAF8B,GAA3B,EAGvBW,KAAK,CAACR,SAAN,IAAmBc,UAAU,CAACO,CAAC,GAAG,GAAL,EAAU,IAAV,CAHN,EAGuBP,UAAU,CAACO,CAAC,GAAG,CAAL,EAAQ,KAAR,CAHjC,CAAvB,CAF2B,CAAR,CAAtB;AAMD,CA9BM","sourcesContent":["import React from 'react';\nimport classNames from 'classnames';\nimport { withNativeProps } from '../../utils/native-props';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { StarFill } from 'antd-mobile-icons';\nimport { usePropsValue } from '../../utils/use-props-value';\nconst classPrefix = `adm-rate`;\nconst defaultProps = {\n  count: 5,\n  allowHalf: false,\n  character: React.createElement(StarFill, null),\n  defaultValue: 0,\n  readOnly: false,\n  allowClear: true\n};\nexport const Rate = p => {\n  const props = mergeProps(defaultProps, p);\n  const [value, setValue] = usePropsValue(props);\n  const starList = Array(props.count).fill(null);\n\n  function renderStar(v, half) {\n    return React.createElement(\"div\", {\n      className: classNames(`${classPrefix}-star`, {\n        [`${classPrefix}-star-active`]: value >= v,\n        [`${classPrefix}-star-half`]: half,\n        [`${classPrefix}-star-readonly`]: props.readOnly\n      }),\n      onClick: () => {\n        if (props.readOnly) return;\n\n        if (props.allowClear && value === v) {\n          setValue(0);\n        } else {\n          setValue(v);\n        }\n      }\n    }, props.character);\n  }\n\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix\n  }, starList.map((_, i) => React.createElement(\"div\", {\n    key: i,\n    className: classNames(`${classPrefix}-box`)\n  }, props.allowHalf && renderStar(i + 0.5, true), renderStar(i + 1, false)))));\n};"]},"metadata":{},"sourceType":"module"}