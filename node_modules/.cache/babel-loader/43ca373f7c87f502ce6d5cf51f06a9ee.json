{"ast":null,"code":"import _regeneratorRuntime from \"D:\\\\react\\\\project0330\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"D:\\\\react\\\\project0330\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"D:\\\\react\\\\project0330\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\react\\\\project0330\\\\src\\\\views\\\\config\\\\login\\\\loginView\\\\index.js\";\n\nimport React, { useState } from \"react\";\nimport axios from \"axios\";\nimport classNames from \"classnames\";\nimport validatorInput from \"../../../../utils/validator\";\nimport \"./style.css\";\n\nvar LoginView = function LoginView(props) {\n  var loginHandle = props.loginHandle;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      uname = _useState2[0],\n      setUname = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      upassword = _useState4[0],\n      setUpassword = _useState4[1];\n\n  var _useState5 = useState({}),\n      _useState6 = _slicedToArray(_useState5, 2),\n      tarErrors = _useState6[0],\n      setTarErrors = _useState6[1];\n\n  function loginCheckEvent() {\n    return _loginCheckEvent.apply(this, arguments);\n  }\n\n  function _loginCheckEvent() {\n    _loginCheckEvent = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var _validatorInput, isValid, errors, _yield$axios, data, status, user;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _validatorInput = validatorInput({\n                uname: uname,\n                upassword: upassword\n              }), isValid = _validatorInput.isValid, errors = _validatorInput.errors;\n\n              if (!isValid) {\n                _context.next = 6;\n                break;\n              }\n\n              console.log(errors);\n              setTarErrors(errors);\n              _context.next = 13;\n              break;\n\n            case 6:\n              _context.next = 8;\n              return axios({\n                url: \"http://127.0.0.1:8000/login/check\",\n                method: \"post\",\n                headers: {\n                  \"Content-Type\": \"application/json;charset=utf-8\",\n                  \"Accept\": \"application/json\"\n                },\n                data: {\n                  uname: \"ivan\",\n                  uphone: uname,\n                  upassword: upassword\n                }\n              });\n\n            case 8:\n              _yield$axios = _context.sent;\n              data = _yield$axios.data;\n              status = _yield$axios.status;\n              console.log(data);\n\n              if (status === 200 && data.check) {\n                user = {\n                  token: data.token,\n                  nick: data.nick,\n                  id: data.id\n                };\n                setTarErrors({});\n                loginHandle(user);\n              }\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n    return _loginCheckEvent.apply(this, arguments);\n  }\n\n  var uNameChangeHandle = function uNameChangeHandle(e) {\n    var value = e.target.value;\n    setUname(value);\n  };\n\n  var uPasswordChangeHandle = function uPasswordChangeHandle(e) {\n    var value = e.target.value;\n    setUpassword(value);\n  };\n\n  function onSubmitHandle(e) {\n    e.preventDefault();\n    loginCheckEvent();\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"login-container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: onSubmitHandle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('input-container', {\n      'input-container-error': tarErrors.uname\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \" iconfont icon-tablet\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u7528\\u6237\\u540D/\\u624B\\u673A\\u53F7\",\n    value: uname,\n    onChange: uNameChangeHandle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: classNames('phone-container', {\n      'input-container-error': tarErrors.uname\n    }),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    className: \"iconfont icon-key\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"\\u8F93\\u5165\\u9A8C\\u8BC1\\u7801\",\n    value: upassword,\n    onChange: uPasswordChangeHandle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 24\n    }\n  }, \"\\u53D1\\u9001\\u9A8C\\u8BC1\\u7801\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"btn-login\",\n    onClick: onSubmitHandle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 21\n    }\n  }, \"\\u767B\\u5F55\")));\n};\n\nexport default LoginView;","map":{"version":3,"sources":["D:/react/project0330/src/views/config/login/loginView/index.js"],"names":["React","useState","axios","classNames","validatorInput","LoginView","props","loginHandle","uname","setUname","upassword","setUpassword","tarErrors","setTarErrors","loginCheckEvent","isValid","errors","console","log","url","method","headers","data","uphone","status","check","user","token","nick","id","uNameChangeHandle","e","value","target","uPasswordChangeHandle","onSubmitHandle","preventDefault"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport classNames from \"classnames\";\r\n\r\nimport validatorInput from \"../../../../utils/validator\";\r\n\r\nimport \"./style.css\"\r\n\r\nconst LoginView = (props) =>{\r\n\r\n    const { loginHandle } = props\r\n\r\n    const [uname,setUname] = useState(\"\")\r\n    const [upassword,setUpassword] = useState(\"\")\r\n    const [tarErrors,setTarErrors] = useState({})\r\n    \r\n    async function loginCheckEvent(){\r\n\r\n        var { isValid, errors } = validatorInput({\r\n            uname, upassword\r\n        })\r\n        if(isValid){\r\n            console.log(errors)\r\n            setTarErrors(errors)\r\n        }else{\r\n            const { data, status } = await axios({\r\n                url:\"http://127.0.0.1:8000/login/check\",\r\n                method:\"post\",\r\n                headers:{\r\n                    \"Content-Type\":\"application/json;charset=utf-8\",\r\n                    \"Accept\":\"application/json\"\r\n                },\r\n                data:{\r\n                    uname:\"ivan\",\r\n                    uphone:uname,\r\n                    upassword:upassword\r\n                }\r\n            })\r\n            console.log(data)\r\n            if( status === 200 && data.check ){\r\n                \r\n                let user = {\r\n                    token:data.token,\r\n                    nick:data.nick,\r\n                    id:data.id\r\n                }\r\n                setTarErrors({})\r\n                loginHandle( user )\r\n            }   \r\n        }\r\n    }\r\n\r\n    const uNameChangeHandle = (e) =>{\r\n        const { value } = e.target\r\n        setUname( value )\r\n    }\r\n\r\n    const uPasswordChangeHandle = (e) =>{\r\n        const { value } = e.target\r\n        setUpassword( value )\r\n    }\r\n\r\n    function onSubmitHandle(e){\r\n        e.preventDefault()\r\n        loginCheckEvent()\r\n    }\r\n\r\n    return (\r\n\r\n            <div id=\"login-container\">\r\n                <form onSubmit={onSubmitHandle}>\r\n                    <div className={classNames('input-container',{'input-container-error':tarErrors.uname})}>\r\n                        <i className=\" iconfont icon-tablet\"/>\r\n                        <input\r\n                            type=\"text\"\r\n                            placeholder=\"用户名/手机号\"\r\n                            value={uname}\r\n                            onChange={uNameChangeHandle}\r\n                        />\r\n                    </div>\r\n                    <div className={classNames('phone-container',{'input-container-error':tarErrors.uname})}>\r\n                        <i className=\"iconfont icon-key\"/>\r\n                        \r\n                        <input \r\n                        type=\"text\" \r\n                        placeholder=\"输入验证码\"\r\n                        value={upassword}\r\n                        onChange={uPasswordChangeHandle}\r\n                        />\r\n                       <button>发送验证码</button>\r\n                    </div>\r\n                    <button className=\"btn-login\"  onClick={onSubmitHandle}>登录</button>\r\n                </form>\r\n            </div>\r\n    )\r\n}\r\n\r\nexport default LoginView"]},"metadata":{},"sourceType":"module"}