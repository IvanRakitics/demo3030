{"ast":null,"code":"import React, { useRef, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { DownOutline, TextDeletionOutline } from 'antd-mobile-icons';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { shuffle } from '../../utils/shuffle';\nimport Popup from '../popup';\nimport { withNativeProps } from '../../utils/native-props';\nimport SafeArea from '../safe-area';\nimport { useMemoizedFn } from 'ahooks';\nconst classPrefix = 'adm-number-keyboard';\nconst defaultProps = {\n  defaultVisible: false,\n  randomOrder: false,\n  showCloseButton: true,\n  confirmText: null,\n  closeOnConfirm: true,\n  safeArea: true\n};\nexport const NumberKeyboard = p => {\n  const props = mergeProps(defaultProps, p);\n  const {\n    visible,\n    title,\n    getContainer,\n    confirmText,\n    customKey,\n    randomOrder,\n    showCloseButton,\n    onInput\n  } = props;\n  const keyboardRef = useRef(null);\n  const keys = useMemo(() => {\n    const defaultKeys = ['1', '2', '3', '4', '5', '6', '7', '8', '9'];\n    const keyList = randomOrder ? shuffle(defaultKeys) : defaultKeys;\n    keyList.push('0');\n\n    if (confirmText) {\n      keyList.push(customKey || '');\n    } else {\n      keyList.splice(9, 0, customKey || '');\n      keyList.push('BACKSPACE');\n    }\n\n    return keyList;\n  }, [customKey, confirmText, randomOrder, randomOrder && visible]);\n  const timeoutRef = useRef(-1);\n  const intervalRef = useRef(-1);\n  const onDelete = useMemoizedFn(() => {\n    var _a;\n\n    (_a = props.onDelete) === null || _a === void 0 ? void 0 : _a.call(props);\n  });\n\n  const onBackspacePressStart = () => {\n    timeoutRef.current = window.setTimeout(() => {\n      onDelete();\n      intervalRef.current = window.setInterval(onDelete, 150);\n    }, 700);\n  };\n\n  const onBackspacePressEnd = () => {\n    clearTimeout(timeoutRef.current);\n    clearInterval(intervalRef.current);\n  }; // 点击键盘按键\n\n\n  const onKeyPress = (e, key) => {\n    var _a, _b;\n\n    e.preventDefault();\n\n    switch (key) {\n      case 'BACKSPACE':\n        onDelete === null || onDelete === void 0 ? void 0 : onDelete();\n        break;\n\n      case 'OK':\n        (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(props);\n\n        if (props.closeOnConfirm) {\n          (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n        }\n\n        break;\n\n      default:\n        // 当 customKey 不存在时，点击该键不应该触发 onInput\n        if (key !== '') onInput === null || onInput === void 0 ? void 0 : onInput(key);\n        break;\n    }\n  }; // 渲染 title 和 close button\n\n\n  const renderHeader = () => {\n    if (!showCloseButton && !title) return null;\n    return React.createElement(\"div\", {\n      className: classNames(`${classPrefix}-header`, {\n        'with-title': !!title\n      })\n    }, title && React.createElement(\"div\", {\n      className: `${classPrefix}-title`\n    }, title), showCloseButton && React.createElement(\"span\", {\n      className: `${classPrefix}-header-close-button`,\n      onClick: () => {\n        var _a;\n\n        (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n      },\n      role: 'button',\n      title: 'CLOSE'\n    }, React.createElement(DownOutline, null)));\n  }; // 渲染基础键盘按键\n\n\n  const renderKey = (key, index) => {\n    const isNumberKey = /^\\d$/.test(key);\n    const className = classNames(`${classPrefix}-key`, {\n      'number-key': isNumberKey,\n      'sign-key': !isNumberKey && key,\n      'mid-key': index === 9 && !!confirmText\n    });\n    return React.createElement(\"div\", {\n      key: key,\n      className: className,\n      onTouchStart: () => {\n        if (key === 'BACKSPACE') {\n          onBackspacePressStart();\n        }\n      },\n      onTouchEnd: e => {\n        onKeyPress(e, key);\n\n        if (key === 'BACKSPACE') {\n          onBackspacePressEnd();\n        }\n      },\n      onMouseUp: e => {\n        onKeyPress(e, key);\n      },\n      title: key,\n      role: 'button'\n    }, key === 'BACKSPACE' ? React.createElement(TextDeletionOutline, null) : key);\n  };\n\n  return React.createElement(Popup, {\n    visible: visible,\n    getContainer: getContainer,\n    mask: false,\n    afterClose: props.afterClose,\n    afterShow: props.afterShow,\n    className: `${classPrefix}-popup`,\n    stopPropagation: props.stopPropagation\n  }, withNativeProps(props, React.createElement(\"div\", {\n    ref: keyboardRef,\n    className: classPrefix,\n    onMouseDown: e => {\n      e.preventDefault();\n    }\n  }, renderHeader(), React.createElement(\"div\", {\n    className: `${classPrefix}-wrapper`\n  }, React.createElement(\"div\", {\n    className: classNames(`${classPrefix}-main`, {\n      'confirmed-style': !!confirmText\n    })\n  }, keys.map(renderKey)), !!confirmText && React.createElement(\"div\", {\n    className: `${classPrefix}-confirm`\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-key extra-key bs-key`,\n    onTouchStart: () => {\n      onBackspacePressStart();\n    },\n    onTouchEnd: e => {\n      onKeyPress(e, 'BACKSPACE');\n      onBackspacePressEnd();\n    },\n    onMouseUp: e => onKeyPress(e, 'BACKSPACE'),\n    title: 'BACKSPACE',\n    role: 'button'\n  }, React.createElement(TextDeletionOutline, null)), React.createElement(\"div\", {\n    className: `${classPrefix}-key extra-key ok-key`,\n    onTouchEnd: e => onKeyPress(e, 'OK'),\n    onMouseUp: e => onKeyPress(e, 'OK'),\n    role: 'button'\n  }, confirmText))), props.safeArea && React.createElement(\"div\", {\n    className: `${classPrefix}-footer`\n  }, React.createElement(SafeArea, {\n    position: 'bottom'\n  })))));\n};","map":{"version":3,"sources":["D:/react/project0330/node_modules/antd-mobile/es/components/number-keyboard/number-keyboard.js"],"names":["React","useRef","useMemo","classNames","DownOutline","TextDeletionOutline","mergeProps","shuffle","Popup","withNativeProps","SafeArea","useMemoizedFn","classPrefix","defaultProps","defaultVisible","randomOrder","showCloseButton","confirmText","closeOnConfirm","safeArea","NumberKeyboard","p","props","visible","title","getContainer","customKey","onInput","keyboardRef","keys","defaultKeys","keyList","push","splice","timeoutRef","intervalRef","onDelete","_a","call","onBackspacePressStart","current","window","setTimeout","setInterval","onBackspacePressEnd","clearTimeout","clearInterval","onKeyPress","e","key","_b","preventDefault","onConfirm","onClose","renderHeader","createElement","className","onClick","role","renderKey","index","isNumberKey","test","onTouchStart","onTouchEnd","onMouseUp","mask","afterClose","afterShow","stopPropagation","ref","onMouseDown","map","position"],"mappings":"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","sourcesContent":["import React, { useRef, useMemo } from 'react';\nimport classNames from 'classnames';\nimport { DownOutline, TextDeletionOutline } from 'antd-mobile-icons';\nimport { mergeProps } from '../../utils/with-default-props';\nimport { shuffle } from '../../utils/shuffle';\nimport Popup from '../popup';\nimport { withNativeProps } from '../../utils/native-props';\nimport SafeArea from '../safe-area';\nimport { useMemoizedFn } from 'ahooks';\nconst classPrefix = 'adm-number-keyboard';\nconst defaultProps = {\n  defaultVisible: false,\n  randomOrder: false,\n  showCloseButton: true,\n  confirmText: null,\n  closeOnConfirm: true,\n  safeArea: true\n};\nexport const NumberKeyboard = p => {\n  const props = mergeProps(defaultProps, p);\n  const {\n    visible,\n    title,\n    getContainer,\n    confirmText,\n    customKey,\n    randomOrder,\n    showCloseButton,\n    onInput\n  } = props;\n  const keyboardRef = useRef(null);\n  const keys = useMemo(() => {\n    const defaultKeys = ['1', '2', '3', '4', '5', '6', '7', '8', '9'];\n    const keyList = randomOrder ? shuffle(defaultKeys) : defaultKeys;\n    keyList.push('0');\n\n    if (confirmText) {\n      keyList.push(customKey || '');\n    } else {\n      keyList.splice(9, 0, customKey || '');\n      keyList.push('BACKSPACE');\n    }\n\n    return keyList;\n  }, [customKey, confirmText, randomOrder, randomOrder && visible]);\n  const timeoutRef = useRef(-1);\n  const intervalRef = useRef(-1);\n  const onDelete = useMemoizedFn(() => {\n    var _a;\n\n    (_a = props.onDelete) === null || _a === void 0 ? void 0 : _a.call(props);\n  });\n\n  const onBackspacePressStart = () => {\n    timeoutRef.current = window.setTimeout(() => {\n      onDelete();\n      intervalRef.current = window.setInterval(onDelete, 150);\n    }, 700);\n  };\n\n  const onBackspacePressEnd = () => {\n    clearTimeout(timeoutRef.current);\n    clearInterval(intervalRef.current);\n  }; // 点击键盘按键\n\n\n  const onKeyPress = (e, key) => {\n    var _a, _b;\n\n    e.preventDefault();\n\n    switch (key) {\n      case 'BACKSPACE':\n        onDelete === null || onDelete === void 0 ? void 0 : onDelete();\n        break;\n\n      case 'OK':\n        (_a = props.onConfirm) === null || _a === void 0 ? void 0 : _a.call(props);\n\n        if (props.closeOnConfirm) {\n          (_b = props.onClose) === null || _b === void 0 ? void 0 : _b.call(props);\n        }\n\n        break;\n\n      default:\n        // 当 customKey 不存在时，点击该键不应该触发 onInput\n        if (key !== '') onInput === null || onInput === void 0 ? void 0 : onInput(key);\n        break;\n    }\n  }; // 渲染 title 和 close button\n\n\n  const renderHeader = () => {\n    if (!showCloseButton && !title) return null;\n    return React.createElement(\"div\", {\n      className: classNames(`${classPrefix}-header`, {\n        'with-title': !!title\n      })\n    }, title && React.createElement(\"div\", {\n      className: `${classPrefix}-title`\n    }, title), showCloseButton && React.createElement(\"span\", {\n      className: `${classPrefix}-header-close-button`,\n      onClick: () => {\n        var _a;\n\n        (_a = props.onClose) === null || _a === void 0 ? void 0 : _a.call(props);\n      },\n      role: 'button',\n      title: 'CLOSE'\n    }, React.createElement(DownOutline, null)));\n  }; // 渲染基础键盘按键\n\n\n  const renderKey = (key, index) => {\n    const isNumberKey = /^\\d$/.test(key);\n    const className = classNames(`${classPrefix}-key`, {\n      'number-key': isNumberKey,\n      'sign-key': !isNumberKey && key,\n      'mid-key': index === 9 && !!confirmText\n    });\n    return React.createElement(\"div\", {\n      key: key,\n      className: className,\n      onTouchStart: () => {\n        if (key === 'BACKSPACE') {\n          onBackspacePressStart();\n        }\n      },\n      onTouchEnd: e => {\n        onKeyPress(e, key);\n\n        if (key === 'BACKSPACE') {\n          onBackspacePressEnd();\n        }\n      },\n      onMouseUp: e => {\n        onKeyPress(e, key);\n      },\n      title: key,\n      role: 'button'\n    }, key === 'BACKSPACE' ? React.createElement(TextDeletionOutline, null) : key);\n  };\n\n  return React.createElement(Popup, {\n    visible: visible,\n    getContainer: getContainer,\n    mask: false,\n    afterClose: props.afterClose,\n    afterShow: props.afterShow,\n    className: `${classPrefix}-popup`,\n    stopPropagation: props.stopPropagation\n  }, withNativeProps(props, React.createElement(\"div\", {\n    ref: keyboardRef,\n    className: classPrefix,\n    onMouseDown: e => {\n      e.preventDefault();\n    }\n  }, renderHeader(), React.createElement(\"div\", {\n    className: `${classPrefix}-wrapper`\n  }, React.createElement(\"div\", {\n    className: classNames(`${classPrefix}-main`, {\n      'confirmed-style': !!confirmText\n    })\n  }, keys.map(renderKey)), !!confirmText && React.createElement(\"div\", {\n    className: `${classPrefix}-confirm`\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-key extra-key bs-key`,\n    onTouchStart: () => {\n      onBackspacePressStart();\n    },\n    onTouchEnd: e => {\n      onKeyPress(e, 'BACKSPACE');\n      onBackspacePressEnd();\n    },\n    onMouseUp: e => onKeyPress(e, 'BACKSPACE'),\n    title: 'BACKSPACE',\n    role: 'button'\n  }, React.createElement(TextDeletionOutline, null)), React.createElement(\"div\", {\n    className: `${classPrefix}-key extra-key ok-key`,\n    onTouchEnd: e => onKeyPress(e, 'OK'),\n    onMouseUp: e => onKeyPress(e, 'OK'),\n    role: 'button'\n  }, confirmText))), props.safeArea && React.createElement(\"div\", {\n    className: `${classPrefix}-footer`\n  }, React.createElement(SafeArea, {\n    position: 'bottom'\n  })))));\n};"]},"metadata":{},"sourceType":"module"}