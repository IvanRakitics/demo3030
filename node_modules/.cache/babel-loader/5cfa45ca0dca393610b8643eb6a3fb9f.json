{"ast":null,"code":"import _slicedToArray from \"D:\\\\react\\\\project0330\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\react\\\\project0330\\\\src\\\\views\\\\enclosure\\\\city\\\\index.js\";\n\nimport React, { useCallback, useEffect, useState } from \"react\";\nimport CityHeader from \"../../../components/PubHeader/index\";\nimport Curcity from \"./curCity\";\nimport CityList from \"./CityList\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useSelector } from \"react-redux\";\nimport { useDispatch } from \"react-redux\";\nimport { changeCity } from \"../../../redux/actions/city\";\nimport axios from 'axios';\n\nvar City = function City() {\n  var navigate = useNavigate();\n  var dispatch = useDispatch();\n  var cityName = useSelector(function (state) {\n    return state.city.city.name;\n  });\n  var onCityChange = useCallback(function (tarCity) {\n    dispatch(changeCity(tarCity));\n    navigate('/main/home', {\n      state: {\n        tarCity: tarCity\n      }\n    });\n  }, []);\n\n  var _useState = useState({\n    citys: []\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      data = _useState2[0],\n      setData = _useState2[1];\n\n  useEffect(function () {\n    axios.get('http://127.0.0.1:8000/citys').then(function (res) {\n      var data = res.data;\n      setData({\n        citys: data\n      });\n    }).catch(function (error) {\n      console.log(error);\n    });\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(CityHeader, {\n    title: \"城市选择\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Curcity, {\n    city: cityName,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }\n  }), data.citys.length > 0 ? /*#__PURE__*/React.createElement(CityList, {\n    data: data,\n    onCityChange: onCityChange,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 13\n    }\n  }) : null);\n};\n\nexport default City;","map":{"version":3,"sources":["D:/react/project0330/src/views/enclosure/city/index.js"],"names":["React","useCallback","useEffect","useState","CityHeader","Curcity","CityList","useNavigate","useSelector","useDispatch","changeCity","axios","City","navigate","dispatch","cityName","state","city","name","onCityChange","tarCity","citys","data","setData","get","then","res","catch","error","console","log","length"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAgBC,WAAhB,EAA6BC,SAA7B,EAAwCC,QAAxC,QAAwD,OAAxD;AACA,OAAOC,UAAP,MAAuB,qCAAvB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,WAAT,QAA6B,aAA7B;AACA,SAASC,WAAT,QAA4B,aAA5B;AAGA,SAASC,UAAT,QAA2B,6BAA3B;AAEA,OAAOC,KAAP,MAAkB,OAAlB;;AAGA,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAK;AAEd,MAAMC,QAAQ,GAAGN,WAAW,EAA5B;AACA,MAAMO,QAAQ,GAAGL,WAAW,EAA5B;AAEA,MAAMM,QAAQ,GAAGP,WAAW,CAAC,UAAAQ,KAAK;AAAA,WAAIA,KAAK,CAACC,IAAN,CAAWA,IAAX,CAAgBC,IAApB;AAAA,GAAN,CAA5B;AAEA,MAAMC,YAAY,GAAGlB,WAAW,CAAC,UAACmB,OAAD,EAAW;AACxCN,IAAAA,QAAQ,CAACJ,UAAU,CAACU,OAAD,CAAX,CAAR;AACAP,IAAAA,QAAQ,CAAC,YAAD,EAAc;AAACG,MAAAA,KAAK,EAAC;AACzBI,QAAAA,OAAO,EAAPA;AADyB;AAAP,KAAd,CAAR;AAGH,GAL+B,EAK9B,EAL8B,CAAhC;;AAPc,kBAcSjB,QAAQ,CAAC;AAACkB,IAAAA,KAAK,EAAC;AAAP,GAAD,CAdjB;AAAA;AAAA,MAcPC,IAdO;AAAA,MAcFC,OAdE;;AAedrB,EAAAA,SAAS,CAAC,YAAI;AACVS,IAAAA,KAAK,CAACa,GAAN,CAAU,6BAAV,EAAyCC,IAAzC,CAA8C,UAACC,GAAD,EAAO;AAAA,UACzCJ,IADyC,GAChCI,GADgC,CACzCJ,IADyC;AAEjDC,MAAAA,OAAO,CAAE;AAACF,QAAAA,KAAK,EAACC;AAAP,OAAF,CAAP;AACH,KAHD,EAGGK,KAHH,CAGS,UAACC,KAAD,EAAS;AACdC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACH,KALD;AAOH,GARQ,EAQP,EARO,CAAT;AASA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAE,MAAnB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADJ,eAEI,oBAAC,OAAD;AAAS,IAAA,IAAI,EAAKb,QAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFJ,EAIIO,IAAI,CAACD,KAAL,CAAWU,MAAX,GAAoB,CAApB,gBACA,oBAAC,QAAD;AACI,IAAA,IAAI,EAAKT,IADb;AAEI,IAAA,YAAY,EAAKH,YAFrB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADA,GAKE,IATN,CADJ;AAcH,CAtCD;;AAwCA,eAAeP,IAAf","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\r\nimport CityHeader from \"../../../components/PubHeader/index\"\r\nimport Curcity from \"./curCity\";\r\nimport CityList from \"./CityList\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useSelector  } from \"react-redux\";\r\nimport { useDispatch } from \"react-redux\";\r\n\r\n\r\nimport { changeCity } from \"../../../redux/actions/city\";\r\n\r\nimport axios from 'axios'\r\n\r\n\r\nconst City = () =>{\r\n    \r\n    const navigate = useNavigate()\r\n    const dispatch = useDispatch()\r\n\r\n    const cityName = useSelector(state => state.city.city.name)\r\n     \r\n    const onCityChange = useCallback((tarCity)=>{\r\n        dispatch(changeCity(tarCity))\r\n        navigate('/main/home',{state:{\r\n            tarCity\r\n        }})\r\n    },[])\r\n\r\n    const [data,setData] = useState({citys:[]})\r\n    useEffect(()=>{\r\n        axios.get('http://127.0.0.1:8000/citys').then((res)=>{\r\n            const { data } = res\r\n            setData( {citys:data} )\r\n        }).catch((error)=>{\r\n            console.log(error)\r\n        })\r\n        \r\n    },[])\r\n    return (\r\n        <div>\r\n            <CityHeader title={\"城市选择\"}/>\r\n            <Curcity city = { cityName }/>\r\n            {\r\n            data.citys.length > 0 ?\r\n            <CityList \r\n                data = { data }\r\n                onCityChange = { onCityChange }\r\n            />\r\n            : null\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default City"]},"metadata":{},"sourceType":"module"}