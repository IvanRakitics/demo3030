{"ast":null,"code":"var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n/* eslint-disable no-empty */\n\n\nimport { useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdateEffect from '../useUpdateEffect';\n\nfunction isFunction(obj) {\n  return typeof obj === 'function';\n}\n\nexport function createUseStorageState(getStorage) {\n  function useStorageState(key, options) {\n    var storage; // https://github.com/alibaba/hooks/issues/800\n\n    try {\n      storage = getStorage();\n    } catch (err) {\n      console.error(err);\n    }\n\n    var serializer = function serializer(value) {\n      if (options === null || options === void 0 ? void 0 : options.serializer) {\n        return options === null || options === void 0 ? void 0 : options.serializer(value);\n      }\n\n      return JSON.stringify(value);\n    };\n\n    var deserializer = function deserializer(value) {\n      if (options === null || options === void 0 ? void 0 : options.deserializer) {\n        return options === null || options === void 0 ? void 0 : options.deserializer(value);\n      }\n\n      return JSON.parse(value);\n    };\n\n    function getStoredValue() {\n      try {\n        var raw = storage === null || storage === void 0 ? void 0 : storage.getItem(key);\n\n        if (raw) {\n          return deserializer(raw);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n\n      if (isFunction(options === null || options === void 0 ? void 0 : options.defaultValue)) {\n        return options === null || options === void 0 ? void 0 : options.defaultValue();\n      }\n\n      return options === null || options === void 0 ? void 0 : options.defaultValue;\n    }\n\n    var _a = __read(useState(function () {\n      return getStoredValue();\n    }), 2),\n        state = _a[0],\n        setState = _a[1];\n\n    useUpdateEffect(function () {\n      setState(getStoredValue());\n    }, [key]);\n\n    var updateState = function updateState(value) {\n      if (typeof value === 'undefined') {\n        setState(undefined);\n        storage === null || storage === void 0 ? void 0 : storage.removeItem(key);\n      } else if (isFunction(value)) {\n        var currentState = value(state);\n\n        try {\n          setState(currentState);\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(currentState));\n        } catch (e) {\n          console.error(e);\n        }\n      } else {\n        try {\n          setState(value);\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(value));\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    };\n\n    return [state, useMemoizedFn(updateState)];\n  }\n\n  return useStorageState;\n}","map":{"version":3,"sources":["D:/react/project0330/node_modules/ahooks/es/createUseStorageState/index.js"],"names":["__read","o","n","m","Symbol","iterator","i","call","r","ar","e","next","done","push","value","error","useState","useMemoizedFn","useUpdateEffect","isFunction","obj","createUseStorageState","getStorage","useStorageState","key","options","storage","err","console","serializer","JSON","stringify","deserializer","parse","getStoredValue","raw","getItem","defaultValue","_a","state","setState","updateState","undefined","removeItem","currentState","setItem"],"mappings":"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","sourcesContent":["var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n      r,\n      ar = [],\n      e;\n\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) {\n      ar.push(r.value);\n    }\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n\n  return ar;\n};\n/* eslint-disable no-empty */\n\n\nimport { useState } from 'react';\nimport useMemoizedFn from '../useMemoizedFn';\nimport useUpdateEffect from '../useUpdateEffect';\n\nfunction isFunction(obj) {\n  return typeof obj === 'function';\n}\n\nexport function createUseStorageState(getStorage) {\n  function useStorageState(key, options) {\n    var storage; // https://github.com/alibaba/hooks/issues/800\n\n    try {\n      storage = getStorage();\n    } catch (err) {\n      console.error(err);\n    }\n\n    var serializer = function serializer(value) {\n      if (options === null || options === void 0 ? void 0 : options.serializer) {\n        return options === null || options === void 0 ? void 0 : options.serializer(value);\n      }\n\n      return JSON.stringify(value);\n    };\n\n    var deserializer = function deserializer(value) {\n      if (options === null || options === void 0 ? void 0 : options.deserializer) {\n        return options === null || options === void 0 ? void 0 : options.deserializer(value);\n      }\n\n      return JSON.parse(value);\n    };\n\n    function getStoredValue() {\n      try {\n        var raw = storage === null || storage === void 0 ? void 0 : storage.getItem(key);\n\n        if (raw) {\n          return deserializer(raw);\n        }\n      } catch (e) {\n        console.error(e);\n      }\n\n      if (isFunction(options === null || options === void 0 ? void 0 : options.defaultValue)) {\n        return options === null || options === void 0 ? void 0 : options.defaultValue();\n      }\n\n      return options === null || options === void 0 ? void 0 : options.defaultValue;\n    }\n\n    var _a = __read(useState(function () {\n      return getStoredValue();\n    }), 2),\n        state = _a[0],\n        setState = _a[1];\n\n    useUpdateEffect(function () {\n      setState(getStoredValue());\n    }, [key]);\n\n    var updateState = function updateState(value) {\n      if (typeof value === 'undefined') {\n        setState(undefined);\n        storage === null || storage === void 0 ? void 0 : storage.removeItem(key);\n      } else if (isFunction(value)) {\n        var currentState = value(state);\n\n        try {\n          setState(currentState);\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(currentState));\n        } catch (e) {\n          console.error(e);\n        }\n      } else {\n        try {\n          setState(value);\n          storage === null || storage === void 0 ? void 0 : storage.setItem(key, serializer(value));\n        } catch (e) {\n          console.error(e);\n        }\n      }\n    };\n\n    return [state, useMemoizedFn(updateState)];\n  }\n\n  return useStorageState;\n}"]},"metadata":{},"sourceType":"module"}