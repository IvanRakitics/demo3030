{"ast":null,"code":"import React, { useRef } from 'react';\nimport classNames from 'classnames';\nimport { animated } from '@react-spring/web';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useResizeEffect } from '../../utils/use-resize-effect';\nimport { useTabListScroll } from '../../utils/use-tab-list-scroll';\nimport ScrollMask from '../scroll-mask';\nimport { ShouldRender } from '../../utils/should-render';\nconst classPrefix = `adm-jumbo-tabs`;\nexport const JumboTab = () => {\n  return null;\n};\nexport const JumboTabs = props => {\n  var _a;\n\n  const tabListContainerRef = useRef(null);\n  const rootRef = useRef(null);\n  const keyToIndexRecord = {};\n  let firstActiveKey = null;\n  const panes = [];\n  React.Children.forEach(props.children, (child, index) => {\n    if (!React.isValidElement(child)) return;\n    const key = child.key;\n    if (typeof key !== 'string') return;\n\n    if (index === 0) {\n      firstActiveKey = key;\n    }\n\n    const length = panes.push(child);\n    keyToIndexRecord[key] = length - 1;\n  });\n  const [activeKey, setActiveKey] = usePropsValue({\n    value: props.activeKey,\n    defaultValue: (_a = props.defaultActiveKey) !== null && _a !== void 0 ? _a : firstActiveKey,\n    onChange: v => {\n      var _a;\n\n      if (v === null) return;\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, v);\n    }\n  });\n  const {\n    scrollLeft,\n    animate\n  } = useTabListScroll(tabListContainerRef, keyToIndexRecord[activeKey]);\n  useResizeEffect(() => {\n    animate(true);\n  }, rootRef);\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix,\n    ref: rootRef\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-header`\n  }, React.createElement(ScrollMask, {\n    scrollTrackRef: tabListContainerRef\n  }), React.createElement(animated.div, {\n    className: `${classPrefix}-tab-list`,\n    ref: tabListContainerRef,\n    scrollLeft: scrollLeft\n  }, panes.map(pane => withNativeProps(pane.props, React.createElement(\"div\", {\n    key: pane.key,\n    className: `${classPrefix}-tab-wrapper`\n  }, React.createElement(\"div\", {\n    onClick: () => {\n      const {\n        key\n      } = pane;\n      if (pane.props.disabled) return;\n\n      if (key === undefined || key === null) {\n        return;\n      }\n\n      setActiveKey(key.toString());\n    },\n    className: classNames(`${classPrefix}-tab`, {\n      [`${classPrefix}-tab-active`]: pane.key === activeKey,\n      [`${classPrefix}-tab-disabled`]: pane.props.disabled\n    })\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-tab-title`\n  }, pane.props.title), React.createElement(\"div\", {\n    className: `${classPrefix}-tab-description`\n  }, pane.props.description))))))), panes.map(pane => {\n    if (pane.props.children === undefined) {\n      return null;\n    }\n\n    const active = pane.key === activeKey;\n    return React.createElement(ShouldRender, {\n      key: pane.key,\n      active: active,\n      forceRender: pane.props.forceRender,\n      destroyOnClose: pane.props.destroyOnClose\n    }, React.createElement(\"div\", {\n      className: `${classPrefix}-content`,\n      style: {\n        display: active ? 'block' : 'none'\n      }\n    }, pane.props.children));\n  })));\n};","map":{"version":3,"sources":["D:/react/project0330/node_modules/antd-mobile/es/components/jumbo-tabs/jumbo-tabs.js"],"names":["React","useRef","classNames","animated","withNativeProps","usePropsValue","useResizeEffect","useTabListScroll","ScrollMask","ShouldRender","classPrefix","JumboTab","JumboTabs","props","_a","tabListContainerRef","rootRef","keyToIndexRecord","firstActiveKey","panes","Children","forEach","children","child","index","isValidElement","key","length","push","activeKey","setActiveKey","value","defaultValue","defaultActiveKey","onChange","v","call","scrollLeft","animate","createElement","className","ref","scrollTrackRef","div","map","pane","onClick","disabled","undefined","toString","title","description","active","forceRender","destroyOnClose","style","display"],"mappings":"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","sourcesContent":["import React, { useRef } from 'react';\nimport classNames from 'classnames';\nimport { animated } from '@react-spring/web';\nimport { withNativeProps } from '../../utils/native-props';\nimport { usePropsValue } from '../../utils/use-props-value';\nimport { useResizeEffect } from '../../utils/use-resize-effect';\nimport { useTabListScroll } from '../../utils/use-tab-list-scroll';\nimport ScrollMask from '../scroll-mask';\nimport { ShouldRender } from '../../utils/should-render';\nconst classPrefix = `adm-jumbo-tabs`;\nexport const JumboTab = () => {\n  return null;\n};\nexport const JumboTabs = props => {\n  var _a;\n\n  const tabListContainerRef = useRef(null);\n  const rootRef = useRef(null);\n  const keyToIndexRecord = {};\n  let firstActiveKey = null;\n  const panes = [];\n  React.Children.forEach(props.children, (child, index) => {\n    if (!React.isValidElement(child)) return;\n    const key = child.key;\n    if (typeof key !== 'string') return;\n\n    if (index === 0) {\n      firstActiveKey = key;\n    }\n\n    const length = panes.push(child);\n    keyToIndexRecord[key] = length - 1;\n  });\n  const [activeKey, setActiveKey] = usePropsValue({\n    value: props.activeKey,\n    defaultValue: (_a = props.defaultActiveKey) !== null && _a !== void 0 ? _a : firstActiveKey,\n    onChange: v => {\n      var _a;\n\n      if (v === null) return;\n      (_a = props.onChange) === null || _a === void 0 ? void 0 : _a.call(props, v);\n    }\n  });\n  const {\n    scrollLeft,\n    animate\n  } = useTabListScroll(tabListContainerRef, keyToIndexRecord[activeKey]);\n  useResizeEffect(() => {\n    animate(true);\n  }, rootRef);\n  return withNativeProps(props, React.createElement(\"div\", {\n    className: classPrefix,\n    ref: rootRef\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-header`\n  }, React.createElement(ScrollMask, {\n    scrollTrackRef: tabListContainerRef\n  }), React.createElement(animated.div, {\n    className: `${classPrefix}-tab-list`,\n    ref: tabListContainerRef,\n    scrollLeft: scrollLeft\n  }, panes.map(pane => withNativeProps(pane.props, React.createElement(\"div\", {\n    key: pane.key,\n    className: `${classPrefix}-tab-wrapper`\n  }, React.createElement(\"div\", {\n    onClick: () => {\n      const {\n        key\n      } = pane;\n      if (pane.props.disabled) return;\n\n      if (key === undefined || key === null) {\n        return;\n      }\n\n      setActiveKey(key.toString());\n    },\n    className: classNames(`${classPrefix}-tab`, {\n      [`${classPrefix}-tab-active`]: pane.key === activeKey,\n      [`${classPrefix}-tab-disabled`]: pane.props.disabled\n    })\n  }, React.createElement(\"div\", {\n    className: `${classPrefix}-tab-title`\n  }, pane.props.title), React.createElement(\"div\", {\n    className: `${classPrefix}-tab-description`\n  }, pane.props.description))))))), panes.map(pane => {\n    if (pane.props.children === undefined) {\n      return null;\n    }\n\n    const active = pane.key === activeKey;\n    return React.createElement(ShouldRender, {\n      key: pane.key,\n      active: active,\n      forceRender: pane.props.forceRender,\n      destroyOnClose: pane.props.destroyOnClose\n    }, React.createElement(\"div\", {\n      className: `${classPrefix}-content`,\n      style: {\n        display: active ? 'block' : 'none'\n      }\n    }, pane.props.children));\n  })));\n};"]},"metadata":{},"sourceType":"module"}